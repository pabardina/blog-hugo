<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Ajout d&#39;actions dans l&#39;admin Django &middot; Pierre-Alexandre Bardina</title>

  
  <link rel="stylesheet" href="http://localhost:1313/css/poole.css">
  <link rel="stylesheet" href="http://localhost:1313/css/hyde.css">
  <link rel="stylesheet" href="http://localhost:1313/css/poole-overrides.css">
  <link rel="stylesheet" href="http://localhost:1313/css/hyde-overrides.css">
  <link rel="stylesheet" href="http://localhost:1313/css/hyde-x.css">
  <link rel="stylesheet" href="http://localhost:1313/css/highlight/sunburst.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:1313/touch-icon-144-precomposed.png">
  <link href="http://localhost:1313/favicon.png" rel="icon">

  
  
  
  

  <meta name="description" content="">
  <meta name="keywords" content="">
  
</head>
<body class="theme-base-0c">
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
      <h1>Pierre-Alexandre Bardina</h1>
      <p class="lead">En perpétuelle évolution</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="http://localhost:1313/">Blog</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="https://github.com/pabardina"><i class="fa fa-github-square fa-3x"></i></a>
      
      
      <a href="https://www.linkedin.com/in/pabardina"><i class="fa fa-linkedin-square fa-3x"></i></a>
      
      
      <a href="https://www.twitter.com/pabardina"><i class="fa fa-twitter-square fa-3x"></i></a>
      
      
      </li>
    </ul>

    

    <p>Copyright &copy; 2015 <a href="http://localhost:1313/license/">License</a><br/>
       Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zyro/hyde-x">Hyde-X</a></p>
  </div>
</div>


<div class="content container">
  <div class="post">
    <h1>Ajout d&#39;actions dans l&#39;admin Django</h1>
    <span class="post-date">May 1, 2015 &middot; 1 minute read
    </span>
    

<h1 id="ajouter-des-actions:6b3bd665a84533850efb913183493d52">Ajouter des actions</h1>

<p>Pour ajouter des actions personnalisées dans l&rsquo;administration de Django, il est nécessaire d&rsquo;éditer le fichier <code>admin.py</code>.</p>

<p>Prenons par exemple, dans une application <a href="https://github.com/pabardina/django-blog">blog</a>, une action qui va publier tous les articles sélectionnés.</p>

<p><img src="/images/2015/05/admin_1.png" alt="" /></p>

<pre><code class="language-python">class ArticleAdmin(admin.ModelAdmin):
    actions = ('publish_event',)

    def publish_event(self, request, queryset):
        for article in queryset:
            if article.published:
                article.published = False
            else:
                article.published = True
                article.save()
        return
</code></pre>

<p>Pour ce faire, il a fallu rajouter une méthode <code>publish_event</code> dans notre exemple.</p>

<p>La documentation de Django étant très bien faite, pour aller plus loin, n&rsquo;hésitez pas à y faire un <a href="https://docs.djangoproject.com/en/1.7/ref/contrib/admin/actions/">tour</a>.</p>

<p>#Ajouter un lien dans un list_display</p>

<p>Dernièrement, j&rsquo;avais besoin de rajouter dans la liste d&rsquo;objets d&rsquo;un model, un lien pour voir l&rsquo;objet en front.</p>

<p><img src="/images/2015/05/admin_2.png" alt="" /></p>

<p>Il a fallu comme pour ajouter une action, rajouter une méthode dans ma classe admin :</p>

<pre><code class="language-python">class ExampleAdmin(admin.ModelAdmin):
    list_display = ('name', 'link_front')

    def link_front(self, form):
        return &quot;&lt;a href='/view/%s'&gt;click me&lt;/a&gt;&quot; % form.id
    link_front.allow_tags = True
</code></pre>

  </div>
  
</div>




<script src="http://localhost:1313/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script data-no-instant>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>

